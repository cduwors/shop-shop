{"ast":null,"code":"export function pluralize(name, count) {\n  if (count === 1) {\n    return name;\n  }\n  return name + \"s\";\n}\nexport function idbPromise(storeName, method, object) {\n  return new Promise((resolve, reject) => {\n    const request = window.indexedDB.open(\"shop-shop\", 1);\n    let db, tx, store;\n    request.onupgradeneeded = function (e) {\n      const db = request.result;\n      db.createObjectStore(\"products\", {\n        keyPath: \"_id\"\n      });\n      db.createObjectStore(\"categories\", {\n        keyPath: \"_id\"\n      });\n      db.createObjectStore(\"cart\", {\n        keyPath: \"_id\"\n      });\n    };\n    request.onerror = function (e) {\n      console.log(\"There was an error\");\n    };\n    request.onsuccess = function (e) {\n      db = request.result;\n      tx = db.transaction(storeName, \"readwrite\");\n      store = tx.objectStore(storeName);\n      db.onerror = function (e) {\n        console.log(\"error\", e);\n      };\n      switch (method) {\n        case \"put\":\n          store.put(object);\n          resolve(object);\n          break;\n        case \"get\":\n          const all = store.getAll();\n          all.onsuccess = function () {\n            resolve(all.result);\n          };\n          break;\n        case \"delete\":\n          store.delete(object._id);\n          break;\n        default:\n          console.log(\"No valid method\");\n          break;\n      }\n      tx.oncomplete = function () {\n        db.close();\n      };\n    };\n  });\n}","map":{"version":3,"names":["pluralize","name","count","idbPromise","storeName","method","object","Promise","resolve","reject","request","window","indexedDB","open","db","tx","store","onupgradeneeded","e","result","createObjectStore","keyPath","onerror","console","log","onsuccess","transaction","objectStore","put","all","getAll","delete","_id","oncomplete","close"],"sources":["/Users/Christina/Desktop/projects/shop-shop/client/src/utils/helpers.js"],"sourcesContent":["export function pluralize(name, count) {\n\tif (count === 1) {\n\t\treturn name;\n\t}\n\treturn name + \"s\";\n}\n\nexport function idbPromise(storeName, method, object) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = window.indexedDB.open(\"shop-shop\", 1);\n\n\t\tlet db, tx, store;\n\n\t\trequest.onupgradeneeded = function (e) {\n\t\t\tconst db = request.result;\n\n\t\t\tdb.createObjectStore(\"products\", { keyPath: \"_id\" });\n\t\t\tdb.createObjectStore(\"categories\", { keyPath: \"_id\" });\n\t\t\tdb.createObjectStore(\"cart\", { keyPath: \"_id\" });\n\t\t};\n\n\t\trequest.onerror = function (e) {\n\t\t\tconsole.log(\"There was an error\");\n\t\t};\n\n\t\trequest.onsuccess = function (e) {\n\t\t\tdb = request.result;\n\t\t\ttx = db.transaction(storeName, \"readwrite\");\n\t\t\tstore = tx.objectStore(storeName);\n\n\t\t\tdb.onerror = function (e) {\n\t\t\t\tconsole.log(\"error\", e);\n\t\t\t};\n\n\t\t\tswitch (method) {\n\t\t\t\tcase \"put\":\n\t\t\t\t\tstore.put(object);\n\t\t\t\t\tresolve(object);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"get\":\n\t\t\t\t\tconst all = store.getAll();\n\t\t\t\t\tall.onsuccess = function () {\n\t\t\t\t\t\tresolve(all.result);\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"delete\":\n\t\t\t\t\tstore.delete(object._id);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(\"No valid method\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\ttx.oncomplete = function () {\n\t\t\t\tdb.close();\n\t\t\t};\n\t\t};\n\t});\n}\n"],"mappings":"AAAA,OAAO,SAASA,SAAS,CAACC,IAAI,EAAEC,KAAK,EAAE;EACtC,IAAIA,KAAK,KAAK,CAAC,EAAE;IAChB,OAAOD,IAAI;EACZ;EACA,OAAOA,IAAI,GAAG,GAAG;AAClB;AAEA,OAAO,SAASE,UAAU,CAACC,SAAS,EAAEC,MAAM,EAAEC,MAAM,EAAE;EACrD,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACvC,MAAMC,OAAO,GAAGC,MAAM,CAACC,SAAS,CAACC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;IAErD,IAAIC,EAAE,EAAEC,EAAE,EAAEC,KAAK;IAEjBN,OAAO,CAACO,eAAe,GAAG,UAAUC,CAAC,EAAE;MACtC,MAAMJ,EAAE,GAAGJ,OAAO,CAACS,MAAM;MAEzBL,EAAE,CAACM,iBAAiB,CAAC,UAAU,EAAE;QAAEC,OAAO,EAAE;MAAM,CAAC,CAAC;MACpDP,EAAE,CAACM,iBAAiB,CAAC,YAAY,EAAE;QAAEC,OAAO,EAAE;MAAM,CAAC,CAAC;MACtDP,EAAE,CAACM,iBAAiB,CAAC,MAAM,EAAE;QAAEC,OAAO,EAAE;MAAM,CAAC,CAAC;IACjD,CAAC;IAEDX,OAAO,CAACY,OAAO,GAAG,UAAUJ,CAAC,EAAE;MAC9BK,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;IAClC,CAAC;IAEDd,OAAO,CAACe,SAAS,GAAG,UAAUP,CAAC,EAAE;MAChCJ,EAAE,GAAGJ,OAAO,CAACS,MAAM;MACnBJ,EAAE,GAAGD,EAAE,CAACY,WAAW,CAACtB,SAAS,EAAE,WAAW,CAAC;MAC3CY,KAAK,GAAGD,EAAE,CAACY,WAAW,CAACvB,SAAS,CAAC;MAEjCU,EAAE,CAACQ,OAAO,GAAG,UAAUJ,CAAC,EAAE;QACzBK,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEN,CAAC,CAAC;MACxB,CAAC;MAED,QAAQb,MAAM;QACb,KAAK,KAAK;UACTW,KAAK,CAACY,GAAG,CAACtB,MAAM,CAAC;UACjBE,OAAO,CAACF,MAAM,CAAC;UACf;QACD,KAAK,KAAK;UACT,MAAMuB,GAAG,GAAGb,KAAK,CAACc,MAAM,EAAE;UAC1BD,GAAG,CAACJ,SAAS,GAAG,YAAY;YAC3BjB,OAAO,CAACqB,GAAG,CAACV,MAAM,CAAC;UACpB,CAAC;UACD;QACD,KAAK,QAAQ;UACZH,KAAK,CAACe,MAAM,CAACzB,MAAM,CAAC0B,GAAG,CAAC;UACxB;QACD;UACCT,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;UAC9B;MAAM;MAGRT,EAAE,CAACkB,UAAU,GAAG,YAAY;QAC3BnB,EAAE,CAACoB,KAAK,EAAE;MACX,CAAC;IACF,CAAC;EACF,CAAC,CAAC;AACH"},"metadata":{},"sourceType":"module"}