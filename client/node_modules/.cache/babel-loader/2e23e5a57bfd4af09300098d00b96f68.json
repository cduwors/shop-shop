{"ast":null,"code":"var _jsxFileName = \"/Users/Christina/Desktop/projects/shop-shop/client/src/components/Cart/index.js\";\nimport React, { useEffect } from \"react\";\nimport CartItem from \"../CartItem\";\nimport Auth from \"../../utils/auth\";\nimport \"./style.css\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\nconst Cart = () => {\n  const [state, dispatch] = useStoreContext();\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get');\n      dispatch({\n        type: ADD_MULTIPLE_TO_CART,\n        products: [...cart]\n      });\n    }\n    if (!state.cart.length) {\n      getCart;\n    }\n  });\n  function toggleCart() {\n    dispatch({\n      type: TOGGLE_CART\n    });\n  }\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  }\n  if (!state.cartOpen) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"cart-closed\",\n      onClick: toggleCart,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      role: \"img\",\n      \"aria-label\": \"trash\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 5\n      }\n    }, \"\\uD83D\\uDED2\"));\n  }\n  console.log(state);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close\",\n    onClick: toggleCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 4\n    }\n  }, \"[close]\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }\n  }, \"Shopping Cart\"), state.cart.length ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, state.cart.map(item => /*#__PURE__*/React.createElement(CartItem, {\n    key: item._id,\n    item: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-row space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Total: $\", calculateTotal()), Auth.loggedIn() ? /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 8\n    }\n  }, \"Checkout\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 8\n    }\n  }, \"(log in to check out)\"))) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"shocked\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 6\n    }\n  }, \"\\uD83D\\uDE31\"), \"You haven't added anything to your cart yet!\"));\n};\nexport default Cart;","map":{"version":3,"names":["React","useEffect","CartItem","Auth","useStoreContext","TOGGLE_CART","ADD_MULTIPLE_TO_CART","idbPromise","Cart","state","dispatch","getCart","cart","type","products","length","toggleCart","calculateTotal","sum","forEach","item","price","purchaseQuantity","toFixed","cartOpen","console","log","map","_id","loggedIn"],"sources":["/Users/Christina/Desktop/projects/shop-shop/client/src/components/Cart/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport CartItem from \"../CartItem\";\nimport Auth from \"../../utils/auth\";\nimport \"./style.css\";\n\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport { idbPromise } from \"../../utils/helpers\";\n\nconst Cart = () => {\n\tconst [state, dispatch] = useStoreContext();\n\n\tuseEffect(() => {\n\t\tasync function getCart() {\n\t\t\tconst cart = await idbPromise('cart', 'get');\n\t\t\tdispatch({ type: ADD_MULTIPLE_TO_CART, products: [...cart]});\n\t\t}\n\t\tif (!state.cart.length) {\n\t\t\tgetCart\n\t\t}\n\t})\n\n\tfunction toggleCart() {\n\t\tdispatch({ type: TOGGLE_CART });\n\t}\n\n\tfunction calculateTotal() {\n\t\tlet sum = 0;\n\t\tstate.cart.forEach((item) => {\n\t\t\tsum += item.price * item.purchaseQuantity;\n\t\t});\n\t\treturn sum.toFixed(2);\n\t}\n\n\tif (!state.cartOpen) {\n\t\treturn (\n\t\t\t<div className=\"cart-closed\" onClick={toggleCart}>\n\t\t\t\t<span role=\"img\" aria-label=\"trash\">\n\t\t\t\t\tðŸ›’\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tconsole.log(state);\n\treturn (\n\t\t<div className=\"cart\">\n\t\t\t<div className=\"close\" onClick={toggleCart}>\n\t\t\t\t[close]\n\t\t\t</div>\n\t\t\t<h2>Shopping Cart</h2>\n\t\t\t{state.cart.length ? (\n\t\t\t\t<div>\n\t\t\t\t\t{state.cart.map((item) => (\n\t\t\t\t\t\t<CartItem key={item._id} item={item} />\n\t\t\t\t\t))}\n\t\t\t\t\t<div className=\"flex-row space-between\">\n\t\t\t\t\t\t<strong>Total: ${calculateTotal()}</strong>\n\t\t\t\t\t\t{Auth.loggedIn() ? (\n\t\t\t\t\t\t\t<button>Checkout</button>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<span>(log in to check out)</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<h3>\n\t\t\t\t\t<span role=\"img\" aria-label=\"shocked\">\n\t\t\t\t\t\tðŸ˜±\n\t\t\t\t\t</span>\n\t\t\t\t\tYou haven't added anything to your cart yet!\n\t\t\t\t</h3>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default Cart;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,QAAQ,MAAM,aAAa;AAClC,OAAOC,IAAI,MAAM,kBAAkB;AACnC,OAAO,aAAa;AAEpB,SAASC,eAAe,QAAQ,yBAAyB;AACzD,SAASC,WAAW,EAAEC,oBAAoB,QAAQ,qBAAqB;AACvE,SAASC,UAAU,QAAQ,qBAAqB;AAEhD,MAAMC,IAAI,GAAG,MAAM;EAClB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGN,eAAe,EAAE;EAE3CH,SAAS,CAAC,MAAM;IACf,eAAeU,OAAO,GAAG;MACxB,MAAMC,IAAI,GAAG,MAAML,UAAU,CAAC,MAAM,EAAE,KAAK,CAAC;MAC5CG,QAAQ,CAAC;QAAEG,IAAI,EAAEP,oBAAoB;QAAEQ,QAAQ,EAAE,CAAC,GAAGF,IAAI;MAAC,CAAC,CAAC;IAC7D;IACA,IAAI,CAACH,KAAK,CAACG,IAAI,CAACG,MAAM,EAAE;MACvBJ,OAAO;IACR;EACD,CAAC,CAAC;EAEF,SAASK,UAAU,GAAG;IACrBN,QAAQ,CAAC;MAAEG,IAAI,EAAER;IAAY,CAAC,CAAC;EAChC;EAEA,SAASY,cAAc,GAAG;IACzB,IAAIC,GAAG,GAAG,CAAC;IACXT,KAAK,CAACG,IAAI,CAACO,OAAO,CAAEC,IAAI,IAAK;MAC5BF,GAAG,IAAIE,IAAI,CAACC,KAAK,GAAGD,IAAI,CAACE,gBAAgB;IAC1C,CAAC,CAAC;IACF,OAAOJ,GAAG,CAACK,OAAO,CAAC,CAAC,CAAC;EACtB;EAEA,IAAI,CAACd,KAAK,CAACe,QAAQ,EAAE;IACpB,oBACC;MAAK,SAAS,EAAC,aAAa;MAAC,OAAO,EAAER,UAAW;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBAChD;MAAM,IAAI,EAAC,KAAK;MAAC,cAAW,OAAO;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,kBAE5B,CACF;EAER;EAEAS,OAAO,CAACC,GAAG,CAACjB,KAAK,CAAC;EAClB,oBACC;IAAK,SAAS,EAAC,MAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACpB;IAAK,SAAS,EAAC,OAAO;IAAC,OAAO,EAAEO,UAAW;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,aAErC,eACN;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,mBAAsB,EACrBP,KAAK,CAACG,IAAI,CAACG,MAAM,gBACjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACEN,KAAK,CAACG,IAAI,CAACe,GAAG,CAAEP,IAAI,iBACpB,oBAAC,QAAQ;IAAC,GAAG,EAAEA,IAAI,CAACQ,GAAI;IAAC,IAAI,EAAER,IAAK;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACpC,CAAC,eACF;IAAK,SAAS,EAAC,wBAAwB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACtC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,eAAiBH,cAAc,EAAE,CAAU,EAC1Cd,IAAI,CAAC0B,QAAQ,EAAE,gBACf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,cAAyB,gBAEzB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,2BACA,CACI,CACD,gBAEN;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACC;IAAM,IAAI,EAAC,KAAK;IAAC,cAAW,SAAS;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,kBAE9B,iDAGR,CACI;AAER,CAAC;AAED,eAAerB,IAAI"},"metadata":{},"sourceType":"module"}